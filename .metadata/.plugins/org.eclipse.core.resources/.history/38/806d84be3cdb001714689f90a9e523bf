package com.cioclass.util.or.xs;

import java.util.List;
import java.util.Set;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;

import com.cioclass.domain.or.QrcodeBuilder4XSEntity;
import com.cioclass.service.or.QrcodeBuilder4XSService;
import com.cioclass.util.DateUtils;
import com.google.common.collect.Lists;

public class QrcodeBuilder4XS2DB extends QrcodeBuilder4XS {
	private static final Logger LOG = LoggerFactory.getLogger(QrcodeBuilder4XS2DB.class);
	@Autowired
	private QrcodeBuilder4XSService qrcodeBuilder4XSService;
	@Override
	public List<QrcodeBuilder4XSEntity> createContent(String en, String bn, String url, int size, int num) {
		Set<String> set = getSet(size, num);
		List<QrcodeBuilder4XSEntity> list = Lists.newArrayList();
		StringBuilder sb = null;
		int i = 1;
		QrcodeBuilder4XSEntity qbe = null;
		for (String s : set) {
			qbe = new QrcodeBuilder4XSEntity();
			qbe.setBn(bn);
			qbe.setEn(en);
			qbe.setUrl(url);
			qbe.setCode(s);
			qbe.setCodeSize(size);
			String numStr = getNumStr(i, 6);
			qbe.setNum(numStr);
			qbe.setNumSize(numStr.length());
			qbe.setPrefix("?o=");
			qbe.setCreateTime(DateUtils.getNow());
			/*
			sb = new StringBuilder();
			sb = sb.append(en).append(bn).append(" ").append(getNumStr(i, 6)).append(",").append(url).append("?n=")
					.append(en).append(bn).append(s);
			list.add(sb.toString());
			*/
			i++;
		}
		return list;
	}
	

}
